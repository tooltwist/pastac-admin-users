"use strict";function PastacAdminUsersController(e,t){function a(){var e="http://"+AUTHSERVICE_HOST+":"+AUTHSERVICE_PORT+"/v1/"+AUTHSERVICE_TENANT+"/admin/getUser",a={selectAll:!0};console.log("url="+e),console.log("params=",a),t({method:"POST",url:e,data:a}).then(function(e){console.log("loadUsers(): ",e),r.users=e.data},s)}function n(e){console.log("saveuser("+e.userId+", "+e.privileges+", "+e.is_admin+")");var a="http://"+AUTHSERVICE_HOST+":"+AUTHSERVICE_PORT+"/v1/"+AUTHSERVICE_TENANT+"/user",n={method:"POST",url:a,data:{id:e.id,is_admin:!!e.is_admin,privileges:e.privileges},headers:{Authorization:"Bearer jwt="+r.jwt,"Content-Type":"application/json",Accept:"application/json"}};console.log("url="+a),console.log("req=",n),t(n).then(function(t){e._changed=!1},s)}function s(e){console.log("response:",e);var t="An error occurred updating the user details";e.data&&e.data.Error&&(t+=":\n"+e.data.Error),alert(t)}var r=this;r.$onInit=function(){e.users=a()},r.$onChanges=function(e){if(r.jwt){if(r._showUsers=r.currentUser&&r.currentUser.isAdmin,r._editable=r.mayEdit&&r.currentUser&&r.currentUser.isAdmin,r._message="",r._jwt&&r.jwt==r._jwt)return;console.log("   1: ",r._jwt),console.log("   2: ",r.jwt),r._jwt=r.jwt}else r._showUsers=!1,r._editable=!1,r._message="User details are only available to admin users."},r.$doCheck=function(){},r.toggleAdmin=function(e){e.is_admin=e.is_admin?0:1,n(e)},r.onchange=function(e){e._changed=!0},r.onblur=function(e){e._changed&&n(e)}}var pastacalExampleComponent_scripts=document.getElementsByTagName("script"),pastacalExampleComponent_currentScriptPath=pastacalExampleComponent_scripts[pastacalExampleComponent_scripts.length-1].src,pastacalExampleComponent_templateUrl=pastacalExampleComponent_currentScriptPath.replace("/pastac-admin-users.js","/pastac-admin-users.html");angular.module("pastac-admin-users",[]).component("pastacAdminUsers",{controller:PastacAdminUsersController,controllerAs:"ctrl",bindings:{mayEdit:"<",currentUser:"<",jwt:"<"},templateUrl:pastacalExampleComponent_templateUrl});